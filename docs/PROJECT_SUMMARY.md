# üé≤ D&D Application - –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
DnD_Project/
‚îú‚îÄ‚îÄ üìÑ main.py                      # ‚ú® –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ üìÑ requests.py                  # ‚ú® Pydantic –º–æ–¥–µ–ª–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
‚îú‚îÄ‚îÄ üìÑ bd.py                        # ‚ú® –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLAlchemy
‚îú‚îÄ‚îÄ üìÑ crud.py                      # ‚ú® CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ üìÑ auth.py                      # ‚ú® JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îú‚îÄ‚îÄ üìÑ routes_users.py              # ‚ú® API —Ä–æ—É—Ç—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îú‚îÄ‚îÄ üìÑ socketio_server.py           # ‚ú® Socket.IO —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ üìÑ test_db.py                   # –¢–µ—Å—Ç—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ üìÑ test_socketio_client.py      # –¢–µ—Å—Ç—ã Socket.IO (Python)
‚îú‚îÄ‚îÄ üìÑ test_client.html             # ‚ú® –¢–µ—Å—Ç—ã Socket.IO (HTML)
‚îú‚îÄ‚îÄ üìÑ requirements.txt             # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ üìÑ API_DOCUMENTATION.md         # ‚ú® –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
‚îú‚îÄ‚îÄ üìÑ DATABASE_INFO.md             # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ë–î
‚îú‚îÄ‚îÄ üìÑ SETUP_SUMMARY.md             # –°–≤–æ–¥–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îú‚îÄ‚îÄ üìÑ PROJECT_SUMMARY.md           # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ üóÑÔ∏è dnd_app.db                   # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite
```

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã)

```bash
pip install -r requirements.txt
```

### 2. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
python main.py
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞: **http://localhost:8000**

### 3. –î–æ—Å—Ç—É–ø–Ω—ã–µ URL

- **API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (Swagger)**: http://localhost:8000/docs
- **API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (ReDoc)**: http://localhost:8000/redoc
- **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞**: http://localhost:8000/
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è**: http://localhost:8000/health
- **Socket.IO**: ws://localhost:8000/socket.io

## üîê REST API Endpoints

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
```
POST /api/users/register
```

### –í—Ö–æ–¥
```
POST /api/users/login
```

### –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
```
GET /api/users/me
Headers: Authorization: Bearer <token>
```

### –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```
GET /api/users/
Headers: Authorization: Bearer <token>
```

## üîå Socket.IO Features

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è:

1. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ/–û—Ç–∫–ª—é—á–µ–Ω–∏–µ**
   - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ JWT —Ç–æ–∫–µ–Ω—É
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≤—Ö–æ–¥–µ/–≤—ã—Ö–æ–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

2. **–ò–≥—Ä–æ–≤—ã–µ –∫–æ–º–Ω–∞—Ç—ã**
   - `join_room` - –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∫–æ–º–Ω–∞—Ç–µ
   - `leave_room` - –≤—ã—Ö–æ–¥ –∏–∑ –∫–æ–º–Ω–∞—Ç—ã
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∫–æ–º–Ω–∞—Ç—ã

3. **–ß–∞—Ç**
   - `send_message` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–º–Ω–∞—Ç –∏ –æ–±—â–µ–≥–æ —á–∞—Ç–∞
   - Real-time –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

4. **–ë—Ä–æ—Å–∫–∏ –∫—É–±–∏–∫–æ–≤**
   - `dice_roll` - –±—Ä–æ—Å–æ–∫ –∫—É–±–∏–∫–∞
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ d4, d6, d8, d10, d12, d20, d100
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

5. **–û–Ω–ª–∞–π–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**
   - `get_online_users` - —Å–ø–∏—Å–æ–∫ –æ–Ω–ª–∞–π–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–æ–º–Ω–∞—Ç–∞–º

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: Swagger UI (REST API)
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8000/docs
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å —á–µ—Ä–µ–∑ `/api/users/register`
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π `access_token`
4. –ù–∞–∂–º–∏—Ç–µ "Authorize" –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω
5. –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ endpoints

### –í–∞—Ä–∏–∞–Ω—Ç 2: HTML –∫–ª–∏–µ–Ω—Ç (Socket.IO)
1. –û—Ç–∫—Ä–æ–π—Ç–µ `test_client.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ü–æ–ª—É—á–∏—Ç–µ JWT —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ Swagger UI
3. –í—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ –ø–æ–ª–µ "JWT Token"
4. –ù–∞–∂–º–∏—Ç–µ "–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è"
5. –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ Socket.IO —Ñ—É–Ω–∫—Ü–∏–∏

### –í–∞—Ä–∏–∞–Ω—Ç 3: Python –∫–ª–∏–µ–Ω—Ç (Socket.IO)
1. –ü–æ–ª—É—á–∏—Ç–µ JWT —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ API
2. –í—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ `test_socketio_client.py`
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: `python test_socketio_client.py`

### –í–∞—Ä–∏–∞–Ω—Ç 4: –¢–µ—Å—Ç—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
python test_db.py
```

## üìä –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend
- **FastAPI** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **SQLAlchemy** - ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- **SQLite** - –ª–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Pydantic** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **python-socketio** - WebSocket –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è
- **python-jose** - JWT —Ç–æ–∫–µ–Ω—ã
- **bcrypt** - —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π

### Frontend (—Ç–µ—Å—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç)
- **HTML5** + **CSS3** + **JavaScript**
- **Socket.IO Client** - WebSocket –∫–ª–∏–µ–Ω—Ç

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (bcrypt)
- JWT —Ç–æ–∫–µ–Ω—ã –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª–µ–π
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è Socket.IO —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- CORS middleware

‚ö†Ô∏è **–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**
- –ò–∑–º–µ–Ω–∏—Ç—å `SECRET_KEY` –≤ `auth.py`
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CORS –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTTPS
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PostgreSQL –≤–º–µ—Å—Ç–æ SQLite
- –î–æ–±–∞–≤–∏—Ç—å rate limiting
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### Python

```python
import requests
import socketio

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
response = requests.post('http://localhost:8000/api/users/register', json={
    'username': 'player1',
    'email': 'player1@example.com',
    'password': 'SecurePass123',
    'confirm_password': 'SecurePass123',
    'character_name': '–ê—Ä–∞–≥–æ—Ä–Ω'
})

token = response.json()['access_token']

# Socket.IO
sio = socketio.Client()
sio.connect('http://localhost:8000', auth={'token': token})
sio.emit('join_room', {'room_id': 'game1'})
sio.emit('send_message', {'room_id': 'game1', 'message': '–ü—Ä–∏–≤–µ—Ç!'})
```

### JavaScript

```javascript
// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
const response = await fetch('http://localhost:8000/api/users/register', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    username: 'player1',
    email: 'player1@example.com',
    password: 'SecurePass123',
    confirm_password: 'SecurePass123',
    character_name: '–ê—Ä–∞–≥–æ—Ä–Ω'
  })
});

const { access_token } = await response.json();

// Socket.IO
const socket = io('http://localhost:8000', {
  auth: { token: access_token }
});

socket.emit('join_room', { room_id: 'game1' });
socket.emit('send_message', { room_id: 'game1', message: '–ü—Ä–∏–≤–µ—Ç!' });
```

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

### –ë–ª–∏–∂–∞–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:
1. **–ü–µ—Ä—Å–æ–Ω–∞–∂–∏**
   - –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏
   - –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ (—Å–∏–ª–∞, –ª–æ–≤–∫–æ—Å—Ç—å, –∏ —Ç.–¥.)
   - –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –∏ —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∞

2. **–ò–≥—Ä–æ–≤—ã–µ —Å–µ—Å—Å–∏–∏**
   - –°–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–≤—ã—Ö —Å–µ—Å—Å–∏–π
   - –†–æ–ª–∏ (DM, –∏–≥—Ä–æ–∫–∏)
   - –ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä

3. **–ö–∞—Ä—Ç—ã –∏ —Ç–æ–∫–µ–Ω—ã**
   - –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ä—Ç
   - –†–∞–∑–º–µ—â–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
   - Fog of War

4. **–ó–∞–∫–ª–∏–Ω–∞–Ω–∏—è –∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏**
   - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π
   - –ö–Ω–∏–≥–∞ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —É—Ä–æ–Ω–∞

5. **–ë–µ—Å—Ç–∏–∞—Ä–∏–π**
   - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –º–æ–Ω—Å—Ç—Ä–æ–≤
   - –ò–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞ –≤ –±–æ—é
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ HP

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (Alembic)
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Redis)
- –û—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á (Celery)
- –§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (S3)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus + Grafana)
- CI/CD pipeline
- Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **API_DOCUMENTATION.md** - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- **DATABASE_INFO.md** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **Swagger UI** - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

## üéâ –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

### ‚úÖ –ì–æ—Ç–æ–≤–æ:
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite
- ‚úÖ REST API endpoints
- ‚úÖ Socket.IO —Å–µ—Ä–≤–µ—Ä
- ‚úÖ Real-time —á–∞—Ç
- ‚úÖ –ò–≥—Ä–æ–≤—ã–µ –∫–æ–º–Ω–∞—Ç—ã
- ‚úÖ –ë—Ä–æ—Å–∫–∏ –∫—É–±–∏–∫–æ–≤
- ‚úÖ –û–Ω–ª–∞–π–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ –∫–ª–∏–µ–Ω—Ç—ã
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ:
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏
- –ò–≥—Ä–æ–≤—ã–µ —Å–µ—Å—Å–∏–∏
- –ö–∞—Ä—Ç—ã –∏ —Ç–æ–∫–µ–Ω—ã

## ü§ù –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π:
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `/docs` –∏ `/redoc`
- –¢–µ—Å—Ç—ã: `test_db.py`, `test_socketio_client.py`, `test_client.html`

---

**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–î–∞—Ç–∞:** 2025-10-05  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é